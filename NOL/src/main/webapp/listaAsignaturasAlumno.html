<!DOCTYPE html>
<html>
<head>
<meta name="description" content="Trabajo Nol">
<meta name="author" content="3TI21_g1">
<meta charset="ISO-8859-1">

<!-- Hoja de estilos CSS -->
<link rel="stylesheet" href="css/styles.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- IntegraciÃ³n bootstrap -->
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
	type="text/javascript">
	
</script>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">

<!-- IntegraciÃ³n iconos Font Awesome -->
<link rel="stylesheet"
	href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
<title>Asignaturas</title>
</head>
<body id="body">
		<div class="container">

			<div class="d-flex align-items-end flex-column mt-auto p-2">
				<a class="boton-cerrar-sesion" href="" style="float: right;">Cerrar
					sesión</a>
		
		
		</div>

		<div class="row" id="separador"></div>

		<main role="main" class="container" id="main">
			<h4 class="text-center">
				Asignaturas del/la alumn@ <b><span id="nombreAlumno"></span></b>
			</h4>
			<div class="d-flex align-items-end flex-column mt-auto p-2">
				<a class="btn btn-outline-primary" href="/NOL/alumno/VistaExpediente"
					role="button">Abrir Expediente</a>
			</div>

			<div class="list-group" id="list-group"></div>

		</main>
		<div class="d-flex align-items-end-left flex-column mt-auto p-2"
			id="volver">
			<a href="javascript: history.go(-1)" style="text-align: left;">Volver
				atrás</a>
		</div>
		<footer>
			<div class="row" id="footer">
				<p>&nbsp; La aplicación NOL se trata de un sistema de consulta
					de asignaturas y notas para alumnos y profesores</p>
			</div>

		</footer>
	</div>
	<script type="text/javascript">
		$(document)
				.ready(
						function() {
							var receivedData = [];
							$
									.ajax({
										url : "/NOL/alumno/DatosAsignaturasAlumno",
										dataType : 'json',
										error : function() {
											alert("Error Ocurred");
										},
										success : function(data) {
											receivedData = [];
											$
													.each(
															data.jsonArray,
															function(index) {
																$
																		.each(
																				data.jsonArray[index],
																				function(
																						key,
																						value) {
																					var point = [];

																					point
																							.push(key);
																					point
																							.push(value);
																					receivedData
																							.push(point);

																				});
															});
											var divlist = document
													.getElementById("list-group");

											//Recorrer el array
											var asignaturas = receivedData[0];
											var usuario = receivedData[1];
											var acronimos = receivedData[2];
											if(asignaturas[1].length > 0){
											for (i = 0; i < asignaturas.length; i++) {
												var element = document
														.createElement("a");
												element.innerHTML = asignaturas[1][i];
												element.href = "/NOL/alumno/VistaDetalleAsignaturaAlumno?acronimo="
														+ acronimos[1][i];
												element.setAttribute('class',
														'list-group-item');
												divlist.appendChild(element);
											}
											}
											var span1 = document
													.getElementById("nombreAlumno");
											span1.innerHTML = usuario[1];
										}
									});

						});
		$(".boton-cerrar-sesion").click(function() {
			alert("Para cerrar sesión es necesario reiniciar el navegador!");
		});
	</script>
</body>
</html>